"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TCString=void 0;const index_js_1=require("./encoder/index.js"),index_js_2=require("./model/index.js"),IntEncoder_js_1=require("./encoder/field/IntEncoder.js"),TCModel_js_1=require("./TCModel.js");class TCString{static encode(e,n){let t,s="";return e=index_js_1.SemanticPreEncoder.process(e,n),t=Array.isArray(null==n?void 0:n.segments)?n.segments:new index_js_1.SegmentSequence(e,n)[""+e.version],t.forEach((n,r)=>{let d="";r<t.length-1&&(d="."),s+=index_js_1.SegmentEncoder.encode(e,n)+d}),s}static decode(e,n){const t=e.split("."),s=t.length;n||(n=new TCModel_js_1.TCModel);for(let e=0;e<s;e++){const s=t[e],r=index_js_1.Base64Url.decode(s.charAt(0)).substr(0,index_js_1.BitLength.segmentType),d=index_js_2.SegmentIDs.ID_TO_KEY[IntEncoder_js_1.IntEncoder.decode(r,index_js_1.BitLength.segmentType).toString()];index_js_1.SegmentEncoder.decode(s,n,d)}return n}}exports.TCString=TCString;