"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Json=void 0;class Json{static absCall(e,t,s,r){return new Promise((n,o)=>{const a=new XMLHttpRequest;a.withCredentials=s,a.addEventListener("load",()=>{if(a.readyState==XMLHttpRequest.DONE)if(a.status>=200&&a.status<300){let e=a.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}n(e)}else o(new Error(`HTTP Status: ${a.status} response type: ${a.responseType}`))}),a.addEventListener("error",()=>{o(new Error("error"))}),a.addEventListener("abort",()=>{o(new Error("aborted"))}),null===t?a.open("GET",e,!0):a.open("POST",e,!0),a.responseType="json",a.timeout=r,a.ontimeout=()=>{o(new Error("Timeout "+r+"ms "+e))},a.send(t)})}static post(e,t,s=!1,r=0){return this.absCall(e,JSON.stringify(t),s,r)}static fetch(e,t=!1,s=0){return this.absCall(e,null,t,s)}}exports.Json=Json;